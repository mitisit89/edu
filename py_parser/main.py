import jsonfrom time import sleepfrom requests_html import HTMLSessionSTART_URL = 'https://www.avito.ru/moskva/bytovaya_tehnika/dlya_kuhni/holodilniki_i_morozilnye_kamery?p=1'def main():    session=HTMLSession()    try:        state=json.load(open('items.json','rt'))    except FileNotFoundError:        state = {'url':START_URL,'items':[]}    page = session.get(state['url'])    page_num = 1    while page:            items= page.html.find('.item_table-header')            page_items= []            for item in items:                title_tag=item.find('.item-description-title-link ',first=True)                title=title_tag.text                url=list(title_tag.absolute_links)[0]                price_text=item.find('span.price',first=True).text                if price_text in ['Цена не указана','Договорная']:                    price=None                elif price_text=='Бесплатно':                    price=0                else:                    price=int(price_text[:-1].replace(' ', '') )                item_dict={                'title':title,                'url': url,                'price':price,            }               #print(item_dict)                page_items.append(item_dict)            next_page_links = list(page.html.find('.js-pagination-next',first=True).absolute_links)            if len(next_page_links) == 0:                print('Больше страниц нет')                page = None            else:                sleep(10)                page_num +=1                link = next_page_links[0]                print('Получаем страницу %s'%page_num)                print(link)                page=session.get(link)                state['url']=link            state['items'].extend(page_items)            json.dump(state,open('items.json','wt'))if __name__ == '__main__':    main()